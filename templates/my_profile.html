{% extends "_layout.html" %}
{% set page_class = 'profile-page' %} 

{% block content %}
{% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <ul class=flash-messages>
      {% for category, message in messages %}
        <li class="flash-{{ category }}">{{ message }}</li>
      {% endfor %}
      </ul>
    {% endif %}
  {% endwith %}

<div class="profile-container">
      
    <h2 class="profile-title">Update Your Profile</h2>
    <p>Welcome, <strong>{{ student.fname }}!</strong> ({{ student.sid }})</p>
      
    <div class="form-content">
        <form action="{{ url_for('my_profile') }}" method="POST" class="admin-form">
            
            <label for="fname">First Name</label>
            <input type="text" id="fname" name="fname" value="{{ student.fname }}" required>

            <label for="lname">Last Name</label>
            <input type="text" id="lname" name="lname" value="{{ student.lname or '' }}">

            <label for="dept">Department</label>
            <select id="dept" name="department" required>
                {% set depts = ['CSE', 'ECE', 'MECH', 'CIVIL', 'GENERAL'] %}
                {% for d in depts %}
                <option value="{{ d }}" {% if student.department == d %}selected{% endif %}>{{ d }}</option>
                {% endfor %}
            </select>
            
            <label for="sem">Semester</label>
            <input type="number" id="sem" name="sem" min="1" max="8" value="{{ student.sem }}" required>

            <button type="submit" class="login-btn btn-neon">Update My Profile</button>
        </form>
    </div>
</div> {% endblock %}